|<div class="dashboard" ng-controller="CreditsCtrl" ng-init="load()" style="margin-top:75px"> <daimont-header></daimont-header> <div class="container" style="width:97%"> <div class="row"> <ol class="breadcrumb" style="width:100%;margin-top:10px"> <li class="breadcrumb-item"><a href="#/credits/firmado" ui-sref="credits({status : 'firmado'})">Principal</a></li> <li class="breadcrumb-item active">Prestamos</li> </ol> </div> </div> <div class="container" style="background-color: #ffffff;padding: 20px;width:97%"> <div class="panel panel-default panel-table"> <div class="panel-heading"> <div class="row"> <div class="col-lg-6"> <h3 class="panel-title" style="margin-bottom: 10px;!important"><i class="fa fa-credit-card text-primary"></i> Mis Prestamos - <span class="text-muted" style="font-size: 18px;text-transform: capitalize">{{params.status || 'Todos'}}</span></h3> <p class="text-muted">Prestamos realizados recientemente.</p> </div> <div class="col-lg-6 form-group"> <div class="pull-right"> <div class="dropdown"> <button class="btn btn-default btn-icon btn-icon-mini btn-round" id="about-us" data-toggle="dropdown" aria-haspopup="true"> <i class="fa fa-filter"></i> </button> <div class="dropdown-menu dropdown-menu-right"> <a class="dropdown-header">FILTRAR POR</a> <a href="#/credits/pendiente" ui-sref="credits({status : 'pendiente'})" class="dropdown-item"><span class="badge badge-default">PENDIENTE POR FIRMAR</span></a> <a href="#/credits/firmado" ui-sref="credits({status : 'firmado'})" class="dropdown-item"><span class="badge badge-success">FIRMADO</span></a> <a href="#/credits/preaprobado" ui-sref="credits({status : 'preaprobado'})" class="dropdown-item"><span class="badge badge-success">PRE-APROBADO</span></a> <a href="#/credits/preaprobado" ui-sref="credits({status : 'aceptado'})" class="dropdown-item"><span class="badge badge-success">APROBADO</span></a> <a href="#/credits/consignado" ui-sref="credits({status : 'consignado'})" class="dropdown-item"><span class="badge badge-success">CONSIGNADO</span></a> <a href="#/credits/consignado" ui-sref="credits({status : 'finalizado'})" class="dropdown-item"><span class="badge badge-success">FINALIZADO</span></a> <a href="#/credits/morosos" ui-sref="credits({status : 'morosos'})" class="dropdown-item"><span class="badge badge-danger">MOROSOS</span></a> <a href="#/credits/fraude" ui-sref="credits({status : 'fraude'})" class="dropdown-item"><span class="badge badge-danger">FRAUDE</span></a> <a href="#/credits/dificil_recuado" ui-sref="credits({status : 'dificil_recaudo'})" class="dropdown-item"><span class="badge badge-warning">DIFICIL RECAUDO</span></a> <a href="#/credits/rechazado" ui-sref="credits({status : 'rechazado'})" class="dropdown-item"><span class="badge badge-danger">RECHAZADO</span></a> <a href="#/credits/anulado" ui-sref="credits({status : 'anulado'})" class="dropdown-item"><span class="badge badge-danger">ANULADOS</span></a> </div>  </div> </div> </div> </div> </div> <br> <br> <div class="panel-body"> <div class="row col-lg-12"> <div ng-show="records.length == 0 && Records" style="text-align: center;width: 100%"> <div style="position: relative"> <h4>No existen registros</h4> </div> </div> <div style="flex:1" class="loader-wrapper" ng-show="!Records"> <div style="width: 400px;margin: 0 auto;text-align: center"> <img style="width:80px;margin-bottom:10px" src="images/loading.svg"> <p clas="text-white">Estamos cargando listado de prestamo...</p> </div> </div> </div> <div class="row" ng-show="records.length > 0"> <div class="col-lg-6 form-group"> <div class="row"> <div class="col-lg-4"> <label>Buscar</label> <div class="form-group"> <input type="text" ng-model="search" placeholder="Buscar Prestamo" class="form-control"> </div> </div> <div class="col-lg-8 row"> <div class="col-lg-6"> <button href="#/pronto-pago" ng-disabled="!items_tasks[0].data.deposited_time" ui-sref="pronto_pago({ credit : items_tasks[0]._id})" style="margin-top:28px" class="btn btn-primary btn-block" ng-show="items_tasks.length > 0">Consultar mora</button> </div> <div class="col-lg-6"> <a href="" ng-click="update_cupon()" style="margin-top:28px" class="btn btn-primary btn-block" ng-show="items_tasks.length > 0">Editar Cupo</a> </div> </div> </div> </div> <div class="col-lg-6"> <div class="form-group pull-right" style="width:150px"> <selectize name="estrato" required config="itemsConfig" options="[{value:&quot;20&quot;, text:&quot;20&quot;}, {value:&quot;40&quot;, text:&quot;40&quot;}, {value:&quot;60&quot;, text:&quot;60&quot;},  {value:&quot;70&quot;, text:&quot;70&quot;}, {value:&quot;80&quot;, text:&quot;80&quot;}, {value:&quot;90&quot;, text:&quot;90&quot;}, {value:&quot;100&quot;, text:&quot;100&quot;}, {value:&quot;200&quot;, text:&quot;200&quot;}, {value:&quot;500&quot;, text:&quot;500&quot;}]" ng-model="items"></selectize> </div> </div> </div> <div class="table-responsive" ng-show="records.length > 0 "> <table class="table table-hover table-striped"> <thead> <tr> <th style="display:none"></th> <th ng-show="params.status == 'firmado' || params.status == 'aceptado' || params.status == 'consignado' || params.status == 'finalizado' || params.status == 'morosos' || params.status == 'pendiente_48'">Créditos</th> <th>Cliente</th> <th>Estado</th> <th ng-hide="params.status == 'rechazado' || params.status == 'aceptado' || params.status == 'anulado'">{{params.status == 'consignado' || params.status == 'finalizado' || params.status == 'morosos' ? 'Fecha de Consignación' : 'Fecha de solicitud'}}</th> <th ng-show="params.status == 'rechazado'">Fecha de rechazo</th> <th ng-show="params.status == 'aceptado'">Fecha de aprobación</th> <th ng-show="params.status == 'finalizado' ">Fecha de pago</th> <th ng-show="params.status == 'anulado'">Fecha de anulación</th> <th>Banco</th> <th>Monto</th> <th ng-hide="params.status == 'firmado' || params.status == 'pendiente_48'">Total</th> <th>Nota Cliente</th> <th>Nota Crédito</th> <th>Comandos</th> </tr> </thead> <tbody> <tr> <td colspan="11" class="text-center" ng-show="!filtered || filtered.length == 0"><i class="fa fa-exclamation-circle" aria-hidden="true"></i>&nbsp;No existen registros</td> </tr> <tr ng-init="earlyPaymentRow()" ng-class="(record.data.viewed) ? 'row_viewed' : 'row_default'" pagination-id="credits_entity" dir-paginate="record in filtered = (records | orderBy: params.status == 'finalizado'  ? '-_payment[0].createdAt' : '-data.deposited_time'| searchField: '_user.name' | searchField:'_user.last_name' |  searchField:'criteria' | filter:search )                
              | itemsPerPage: items"> <td style="display:none" ng-click="$event.stopPropagation()"> <input ng-hide="record.data.status == 'Rechazado' || record.data.status == 'Anulado'" id="checkbox1" type="checkbox" ng-model="record.add" ng-change="add_to_task()"> </td> <td ng-show="params.status == 'firmado' || params.status == 'consignado' || params.status == 'aceptado' || params.status == 'finalizado' || params.status == 'morosos' || params.status == 'pendiente_48'">{{record.data.count == 0 ? 1 : (record.data.count + 1)}}</td> <td class="relative" ng-init="setCriteriaField()"><a style="margin-left:3px" href="#" ui-sref="detail({ credit : record._id})">{{(record._user.name + ' ' + record._user.data.second_name + ' ' + record._user.last_name + ' ' + record._user.data.second_last_name).toUpperCase()}}</a> <span ng-show="record.data.rejected > 0" class="badge badge-danger has_rejected">{{record.data.rejected}}</span> </td> <td> <span class="badge badge-default" ng-show="record.data.status == 'Pendiente'">PENDIENTE POR FIRMAR</span> <span class="badge badge-primary" ng-show="record.data.status == 'Aceptado'">APROBADO</span> <span class="badge badge-primary" ng-show="record.data.status == 'Firmado'">FIRMADO</span> <span class="badge badge-primary" ng-show="record.data.status == 'Pagado'">PAGADO</span> <span class="badge badge-success" ng-show="record.data.status == 'Consignado'">CONSIGNADO</span> <span class="badge badge-success" ng-show="record.data.status == 'Preaprobado'">PRE-APROBADO</span> <span class="badge badge-success" ng-show="record.data.status == 'Finalizado'">FINALIZADO</span> <span class="badge badge-danger" ng-show="record.data.status == 'Rechazado'">RECHAZADO</span> <span class="badge badge-danger" ng-show="record.data.status == 'Fraude'">FRAUDE</span> <span class="badge badge-warning" ng-show="record.data.status == 'Dificil_recaudo'">DIFICIL RECAUDO</span> <span class="badge badge-danger" ng-show="record.data.status == 'Anulado'">ANULADO</span> <span class="badge badge-danger" ng-show="record.data.status == 'Morosos'">MOROSOS</span> </td> <td ng-show="params.status == 'consignado' || params.status == 'finalizado' || params.status == 'morosos' ">{{(record.data.deposited_time_server || record.data.deposited_time | moment: 'format': 'MMMM DD YYYY, h:mm:ss a').toUpperCase()}}</td> <td ng-show="params.status == 'firmado'">{{ (record._contract.createdAt | moment: 'format': 'MMMM DD YYYY, h:mm:ss a').toUpperCase()}}</td> <td ng-show="params.status == 'pendiente'">{{ (record.createdAt | moment: 'format': 'MMMM DD YYYY, h:mm:ss a').toUpperCase()}}</td> <td ng-show="params.status == 'pendiente_48'">{{ (record.createdAt | moment: 'format': 'MMMM DD YYYY, h:mm:ss a').toUpperCase()}}</td> <td ng-show="params.status == 'rechazado'">{{ (record.data.banned_time | moment: 'format': 'MMMM DD YYYY, h:mm:ss a').toUpperCase()}}</td> <td ng-show="params.status == 'anulado'">{{ (record.data.nulled_time_server || record.updatedAt | moment: 'format': 'MMMM DD YYYY, h:mm:ss a').toUpperCase()}}</td> <td ng-show="params.status == 'aceptado'">{{(record.data.approved_server_time || record.data.deposited_time_server | moment: 'format': 'MMMM DD YYYY, h:mm:ss a').toUpperCase()}}</td> <td ng-show="params.status == 'finalizado'">{{(record._payment[0].createdAt | moment: 'format': 'MMMM DD YYYY, h:mm:ss a').toUpperCase()}}</td> <td ng-show="params.status == 'preaprobado'">{{(record.data.deposited_time_server | moment: 'format': 'MMMM DD YYYY, h:mm:ss a').toUpperCase()}}</td> <td ng-show="params.status == 'fraude'">{{(record.data.deposited_time_server | moment: 'format': 'MMMM DD YYYY, h:mm:ss a').toUpperCase()}}</td> <td ng-show="params.status == 'dificil_recaudo'">{{(record.data.deposited_time_server | moment: 'format': 'MMMM DD YYYY, h:mm:ss a').toUpperCase()}}</td> <td>{{(record._user.data.banco_desembolso).toUpperCase()}}</td> <td>{{record.data.amount[0] | currency:"$ ":0}}</td> <td ng-hide="params.status == 'firmado'">{{record._payment.data.total_payment || paymentForm.total_payment || record.data.total_payment | currency:"$ ":0}}</td> <td style="position:relative" ng-init="getComment()">{{record.comment[0].comment || 'sin comentario'}} <span style="color: #808080;font-size: 10px; width: 100%;display: block" ng-show="record.comment[0]">{{record.comment[0].createAt | moment: 'fromNow'}} - {{ record.comment[0].createAt | moment: 'format': 'MMMM DD YYYY, h:mm:ss a'}}</span> <span style="position: absolute;left: 0px;top: -10px" ng-show="record.comments.length > 0" class="badge badge-primary">{{record.comments.length}}</span> </td> <td style="position:relative" ng-init="getCommentCredit()">{{record.commentCredits[0].comment || 'sin comentario'}} <span style="color: #808080;font-size: 10px; width: 100%;display: block" ng-show="record.commentCredits[0]">{{record.commentCredits[0].createAt | moment: 'fromNow'}} - {{ record.commentCredits[0].createAt | moment: 'format': 'MMMM DD YYYY, h:mm:ss a'}}</span> <span style="position: absolute;left: 0px;top: -10px" ng-show="record.commentCreditsCollection.length > 0" class="badge badge-primary">{{record.commentCreditsCollection.length}}</span> </td> <td> <div class="btn-group btn-group-sm" role="group" aria-label="Small button group"> <a href="{{record.data.cf.path}}" ng-show="record.data.cf" class="btn btn-primary" target="_blank">cedula</a> <a href="{{record.data.dt.path}}" ng-show="record.data.dt" class="btn btn-primary" target="_blank">datacredito</a> <a href="{{record.data.re.path}}" ng-show="record.data.re" class="btn btn-primary" target="_blank">reconocer</a> <a href="{{record.data.ce.path}}" ng-show="record.data.ce" class="btn btn-primary" target="_blank">certificado bancario</a> <a href="{{record.data.ex.path}}" ng-show="record.data.ex" ng-show="" class="btn btn-primary" target="_blank">extracto</a> <a href="{{record.data.ex2.path}}" ng-show="record.data.ex2" ng-show="" class="btn btn-primary" target="_blank">Otro</a> </div> <div ng-init="getFiles()" class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups"> <div class="btn-group mr-2 btn-group-sm" style="margin-top:5px" role="group" aria-label="First group"> <button type="button" class="btn" ng-click="_request_onWhatsApps()" ng-class="record._user.data._request_onWhatsApps ? 'btn-success' : 'btn-secondary'"><i class="fa fa-whatsapp"></i></button> <button type="button" class="btn" ng-click="_request_onPhone()" ng-class="record._user.data._request_onPhone ? 'btn-success' : 'btn-secondary'"><i class="fa fa-mobile"></i></button> <button type="button" class="btn" ng-click="_request_onEmail()" ng-class="record._user.data._request_onEmail ? 'btn-success' : 'btn-secondary'"><i class="fa fa-at"></i></button> </div> <div class="btn-group mr-2 btn-group-sm" style="margin-top:5px" role="group" aria-label="Second group"> <button type="button" class="btn" ng-click="_payment_onWhatsApps()" ng-class="record._user.data._payment_onWhatsApps ? 'btn-success' : 'btn-secondary'"><i class="fa fa-whatsapp"></i></button> <button type="button" class="btn" ng-click="_payment_onPhone()" ng-class="record._user.data._payment_onPhone ? 'btn-success' : 'btn-secondary'"><i class="fa fa-mobile"></i></button> <button type="button" class="btn" ng-click="_payment_onEmail()" ng-class="record._user.data._payment_onEmail ? 'btn-success' : 'btn-secondary'"><i class="fa fa-at"></i></button> </div> <div class="btn-group mr-2 btn-group-sm" style="margin-top:5px" role="group" aria-label="Second group"> <button type="button" class="btn" ng-click="_request_onBankCheck()" ng-class="record._user.data._request_onBankCheck ? 'btn-success' : 'btn-secondary'"><i class="fa fa-bank"></i></button> <button type="button" class="btn" ng-click="_request_onPhoneCheck()" ng-class="record._user.data._request_onPhoneCheck ? 'btn-success' : 'btn-secondary'"><i class="fa fa-mobile"></i></button> <button type="button" class="btn" ng-click="_request_onEmailCheck()" ng-class="record._user.data._request_onEmailCheck ? 'btn-success' : 'btn-secondary'"><i class="fa fa-envelope"></i></button> </div> <div class="btn-group btn-group-sm" style="margin-top:5px" role="group" aria-label="Third group"> <button type="button" ng-class="record._user.data._payment_onNotice ? 'btn-success' : 'btn-secondary'" class="btn btn-secondary" ng-click="preEmail()"><i class="fa fa-exclamation-triangle"></i></button> </div> </div> </td> </tr> </tbody> </table> </div> </div> <br> <br> <div class="pull-left"> <dir-pagination-controls class="pull-right" pagination-id="credits_entity"></dir-pagination-controls> </div> </div> <br> <br> <br> <br> <br> <br> <br> <br> </div> <daimont-footer></daimont-footer></div>