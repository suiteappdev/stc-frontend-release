<div class="dashboard" ng-controller="CreditDetailCtrl" ng-init="load()" style="margin-top:75px"> <daimont-header></daimont-header> <div class="container"> <div class="row"> <ol class="breadcrumb" style="width:100%;margin-top:10px"> <li class="breadcrumb-item"><a href="#/credits/firmado" ui-sref="credits({status : 'firmado'})">Principal</a></li> <li class="breadcrumb-item active">Detalle del credito <span ng-show="credit.data.id">- {{credit.data.id}}</span> </li> </ol> </div> </div> <div class="container"> <div class="row"> <ol class="breadcrumb" style="width:100%;margin-top:10px"> <div class="col col-xs-6 text-right"> <div ng-show="credit.data.status == 'Consignado' || credit.data.status == 'Morosos'"> <button type="button" ng-click="setFirmado()" class="btn btn-sm btn-primary btn-create"><i class="fa fa-undo"></i> Revertir a Firmado</button> <button type="button" ng-click="fraude()" class="btn btn-sm btn-danger btn-create" ng-disabled="$root.user.type == 'SUPERVISOR'">Fraude</button> <button type="button" ng-click="dificil_recaudo()" class="btn btn-sm btn-warning btn-create" ng-disabled="$root.user.type == 'SUPERVISOR'">Dificil Recaudo</button> </div> <div ng-hide="
                credit.data.status == 'Consignado' || 
                credit._payment.length > 0 ||
                credit.data.status == 'Finalizado'  ||
                credit.data.status == 'Pendiente' ||
                credit.data.status == 'Anulado' ||
                credit._user.data.updated == false
                "> <button type="button" ng-click="preapprove()" class="btn btn-sm btn-primary btn-create" ng-disabled="$root.user.type == 'SUPERVISOR'">Pre-aprobar</button> <button type="button" ng-click="approve()" class="btn btn-sm btn-primary btn-create" ng-disabled="$root.user.type == 'SUPERVISOR'">Aprobar</button> <button type="button" ng-click="done()" class="btn btn-sm btn-primary btn-create" ng-disabled="$root.user.type == 'SUPERVISOR'">Depositar</button> <button type="button" ng-click="reject()" class="btn btn-sm btn-danger btn-create" ng-disabled="$root.user.type == 'SUPERVISOR'">Rechazar</button> <button type="button" ng-click="nulled()" class="btn btn-sm btn-danger btn-create" ng-disabled="$root.user.type == 'SUPERVISOR'">Anular</button> </div> <div> <div ng-show="credit.data.status == 'Pagado'"> <button type="button" ng-click="finished()" class="btn btn-sm btn-primary btn-create">Finalizar</button> </div> </div> </div> </ol> </div> </div> <div class="container" style="background-color: #ffffff;padding: 20px"> <div class="panel panel-default panel-table"> <div class="panel-heading"> <div class="row"> <div class="col col-xs-6"> <h3 class="panel-title" style="margin-bottom: 10px;!important"><i class="fa fa-credit-card text-primary"></i>&nbsp;Detalle de Credito</h3> <p class="text-muted">Información del credito actual.</p> <p class="text-muted" ng-show="credit._approvedby">Credito {{credit.data.status}} por {{(credit._approvedby.name + ' ' + credit._approvedby.last_name)}}</p> <p class="pull-left"> <span class="badge badge-success" ng-show="credit._user.data.updated">Actualizado</span> <span class="badge badge-danger" ng-show="!credit._user.data.updated">Desactualizado</span></p> </div> </div> </div> <br> <br> <div class="panel-body"> <div class="row"> <div class="col-lg-12"> <!-- Tabs with Background on Card --> <div class="card"> <ul style="background-color: #002223!important" class="nav nav-tabs nav-tabs-neutral justify-content-left" role="tablist"> <li class="nav-item"> <a class="nav-link" style="border-radius:0" ng-click="tab = 'IC'" ng-class="{'active' : tab === 'IC'}">Info del Cliente</a> </li> <li class="nav-item"> <a class="nav-link" style="border-radius:0" ng-click="tab = 'IP'" ng-class="{'active' : tab === 'IP'}">Info de crédito</a> </li> <li class="nav-item"> <a class="nav-link" style="border-radius:0" ng-click="tab = 'IF'" ng-class="{'active' : tab === 'IF'}">Info Financiera</a> </li> <li class="nav-item" ng-show="credit._payment.length > 0"> <a class="nav-link" style="border-radius:0;background-color: #035e61" ng-click="tab = 'IPA'" ng-class="{'active' : tab === 'IPA'}">Ultimo Pago</a> </li> <li class="nav-item"> <a class="nav-link" ng-click="tab = 'LPA'" ng-class="{'active' : tab === 'LPA'}">Lista de Pagos</a> </li> <li class="nav-item"> <a class="nav-link" ng-click="tab = 'CO'" ng-class="{'active' : tab === 'CO'}">Comentarios <span class="badge badge-success" ng-show="comments.length > 0">{{comments.length}}</span></a> </li> </ul> <div class="card-block"> <!-- Tab panes --> <div class="tab-content text-center" ng-init="tab = 'IC'"> <div class="tab-pane text-left" id="profile1" role="tabpanel" ng-show="tab == 'IC'" ng-class="{'active' : tab === 'IC'}"> <div class="row"> <div class="col-lg-12 text-right"> <div class="form-group"> <a href="#/edit-client/{{credit._user._id}}" ui-sref="edit_client({client : credit._user._id})" class="btn btn-primary">Editar Cliente</a> </div> </div> </div> <div class="row"> <div class="form-group col-lg-12"> <label class="bold">Nombre Completo</label> <p>{{credit.fullname}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Nombres</label> <p>{{(credit._user.name + ' ' + credit._user.data.second_name).toUpperCase() }}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Apellidos</label> <p>{{(credit._user.last_name + ' ' + credit._user.data.second_last_name).toUpperCase()}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Sexo</label> <p>{{(credit._user.data.sexo).toUpperCase() || 'No Definido'}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">CC:</label> <p>{{credit._user.cc || 'No Definido'}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Telefono:</label> <p>{{credit._user.data.phone || 'No Definido'}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Opcional:</label> <p>{{credit._user.data.alternativo || 'No Definido'}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Fijo:</label> <p>{{credit._user.data.fijo || 'No Definido'}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Whatsapp:</label> <p>{{credit._user.data.whatsapps || 'No Definido'}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Email:</label> <p>{{(credit._user.email).toUpperCase() || 'No Definido'}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Departamento</label> <p>{{(credit._user.data.departamento).toUpperCase() || 'No Definido'}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Ciudad</label> <p>{{(credit._user.data.ciudad).toUpperCase() || 'No Definido'}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Dirección</label> <p>{{(credit._user.data.direccion).toUpperCase() || 'No Definido'}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Fecha de nacimiento</label> <p>{{credit._user.data.fecha_nacimiento.day || 'No Definido'}} de {{credit._user.data.fecha_nacimiento.month.toUpperCase()}} DEL {{credit._user.data.fecha_nacimiento.year}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Fecha de expedición</label> <p>{{credit._user.data.fecha_expedicion.day || 'No Definido'}} de {{credit._user.data.fecha_expedicion.month.toUpperCase()}} del {{credit._user.data.fecha_expedicion.year}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Ciudad de expedición</label> <p>{{(credit._user.data.ciudad_expedicion || 'No Definido').toUpperCase()}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Tipo de cuenta</label> <a style="display:block" ng-show="credit._user.data.facebookId" href="http://facebook.com/{{credit._user.data.facebookId}}" target="_blank">FACEBOOK</a> <p ng-show="!credit._user.data.facebookId">DAIMONT</p> </div> <div class="form-group col-lg-6"> <label class="bold">Estado Civil</label> <p>{{(credit._user.data.estado_civil).toUpperCase() || 'No Definido'}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Vehículo</label> <p>{{(credit._user.data.vehiculo || 'No Definido') + ' ' + (credit._user.data.placa ).toUpperCase()}}</p> </div> <div class="col-lg-12"> <h3>Referencias Personales</h3> </div> <div class="form-group col-lg-6"> <label class="bold">Nombres</label> <p>{{(credit._user.data.rfname || 'No Definido').toUpperCase()}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Apellidos</label> <p>{{(credit._user.data.rflastname || 'No Definido').toUpperCase()}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Telefono</label> <p>{{(credit._user.data.rfphone || 'No Definido')}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Parentesco</label> <p>{{(credit._user.data.parentesco || $root.user.data.rfother || 'No Definido')}}</p> </div> <div class="col-lg-12"> <h3>Referencias Comerciales</h3> </div> <div class="form-group col-lg-6"> <label class="bold">Nombres</label> <p>{{(credit._user.data.rcname || 'No Definido').toUpperCase()}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Apellidos</label> <p>{{(credit._user.data.rclastname || 'No Definido').toUpperCase()}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Telefono</label> <p>{{(credit._user.data.rcphone || 'No Definido')}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Relación Comercial</label> <p>{{(credit._user.data.relacion_comercial || $root.user.data.rcothers || 'No Definido')}}</p> </div> </div> </div> <div class="tab-pane" id="home1" role="tabpanel" ng-show="tab == 'IP'" ng-class="{'active' : tab == 'IP'}"> <div class="row"> <div class="form-group col-lg-6 text-left"> <label class="bold">Monto</label> <p>{{credit.data.amount[0] | currency:"$ ":0 || 0}}</p> </div> <div class="form-group col-lg-6 text-left"> <label class="bold">Interes</label> <p>{{mora.interestsDays | currency:"$ ":0 || 0}}</p> </div> <div class="form-group col-lg-6 text-left"> <label class="bold">Gestión de credito</label> <p>{{mora.system_quote | currency:"$ ":0 || 0}}</p> </div> <div class="form-group col-lg-6 text-left"> <label class="bold">Iva</label> <p>{{mora.iva | currency:"$ ":0 || 0}}</p> </div> <div class="form-group col-lg-6 text-left"> <label class="bold">Total a pagar hoy</label> <p><strong>{{mora.total_payment | currency:"$ ":0 || 0}}</strong></p> </div> <div class="form-group col-lg-6 text-left"> <label class="bold">Total a pagar a la fecha</label> <p><strong>{{credit.data.total_payment | currency:"$ "}}</strong></p> </div> <div class="form-group col-lg-6 text-left"> <label class="bold">Total a pagar a 30 dias</label> <p><strong>{{paymentForm_30_day.total_payment | currency:"$ ":0 || 0}}</strong></p> </div> <div class="form-group col-lg-6 text-left"> <label class="bold">Cupo de Prestamo</label> <p><strong>{{credit._user.data.cupon | currency:"$ ":0 || 0}} <span><a ng-hide="$root.user.type == 'SUPERVISOR'" href="" ng-click="update_cupon()"> - Editar</a></span></strong></p> </div> <div class="form-group col-lg-6 text-left"> <label class="bold">Días de intereses</label> <p>{{payForDays}}</p> </div> <div class="form-group col-lg-6 text-left" ng-show="credit.data.deposited_time"> <label class="bold">Fecha de Consignación</label> <p>{{(credit.data.deposited_time | moment: 'format': 'MMMM DD YYYY, h:mm:ss a').toUpperCase()}}</p> </div> <div class="form-group col-lg-6 text-left"> <label class="bold">Fecha de solicitud</label> <p>{{(credit._contract.createdAt | moment: 'format': 'MMMM DD YYYY, h:mm:ss a').toUpperCase()}}</p> </div> <div class="form-group col-lg-6 text-left"> <label class="bold">Fecha de pago</label> <p>{{(credit.data.pay_day | moment: 'format': 'MMMM DD, YYYY, h:mm:ss a').toUpperCase()}}</p> </div> <div class="form-group col-lg-6 text-left"> <label class="bold">Fecha limite de pago a 30 días</label> <p>{{(payday_30days | moment: 'format': 'MMMM DD, YYYY, h:mm:ss a').toUpperCase()}}</p> </div> <div class="form-group col-lg-6 text-left"> <label class="bold"># de prestamos realizados</label> <p>{{count.count || 0}}</p> </div> <div class="form-group col-lg-6 text-left" ng-hide="$root.user.type == 'SUPERVISOR'"> <label class="bold">Bloquear interéses</label> <input style="display:block" type="checkbox" ng-model="lock_credit" ng-change="lock()"> </div> <div class="form-group col-lg-6 text-left"> <label class="bold" style="display:block">Crear pago</label> <button ng-disabled="$root.user.type == 'SUPERVISOR'" ng-show="credit._payment.length == 0" style="width:150px" class="btn btn-primary btn-sm" ng-click="update_payment()">Crear pago</button> <button ng-disabled="$root.user.type == 'SUPERVISOR'" ng-show="credit._payment.length > 0" ng-click="update_payment()" class="btn btn-success btn-sm">Actualizar Pago</button> </div> </div> </div> <div class="tab-pane text-left" id="messages1" role="tabpanel" ng-show="tab == 'IF'" ng-class="{'active' : tab === 'IF'}"> <div class="row"> <div class="form-group col-lg-6"> <label class="bold">Nivel de Estudio</label> <p>{{(credit._user.data.nivel_estudio).toUpperCase() || 'No Definido'}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Actualemte soy:</label> <p>{{(credit._user.data.perfil_actual).toUpperCase() || 'No Definido'}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Tipo de Vivienda</label> <p>{{(credit._user.data.tipo_vivienda).toUpperCase() || 'No Definido'}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Estrato</label> <p>{{(credit._user.data.estrato).toUpperCase() || 'No Definido'}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Ingresos</label> <p>{{(credit._user.data.ingresos_totales).toUpperCase() || 'No Definido'}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Egresos</label> <p>{{(credit._user.data.egresos_totales).toUpperCase() || 'No Definido'}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Ocupación</label> <p>{{(credit._user.data.ocupacion).toUpperCase() || 'No Definido'}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Cuentas bancarias</label> <p>{{credit._user.data.numero_cuentas_bancaria || 'No Definido'}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Tarjeta de credito</label> <p>{{(credit._user.data.tarjeta_credito).toUpperCase() || 'No Definido'}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Banco</label> <p>{{(credit._user.data.banco_desembolso).toUpperCase() || 'No Definido'}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Tipo de Cuenta</label> <p>{{(credit._user.data.tipo_cuenta).toUpperCase() || 'No Definido'}}</p> </div> <div class="form-group col-lg-6"> <label class="bold">Numero de Cuenta</label> <p>{{(credit._user.data.numero_cuenta) || 'No Definido'}}</p> </div> </div> </div> <div class="tab-pane" id="home1" role="tabpanel" ng-show="tab == 'IPA'" ng-class="{'active' : tab == 'IPA'}"> <div class="row"> <div class="form-group col-lg-6 text-left"> <label class="bold">Monto</label> <p>{{credit._payment[0].data.total_payment | currency:"$ ":0 || 0}}</p> </div> <div class="form-group col-lg-6 text-left"> <label class="bold">Interes</label> <p>{{credit._payment[0].data.interestsDays | currency:"$ ":0 || 0}}</p> </div> <div class="form-group col-lg-6 text-left"> <label class="bold">Gestión de credito</label> <p>{{credit._payment[0].data.system_quote | currency:"$ ":0 || 0}}</p> </div> <div class="form-group col-lg-6 text-left"> <label class="bold">Iva</label> <p>{{credit._payment[0].data.iva | currency:"$ ":0 || 0}}</p> </div> <div class="form-group col-lg-6 text-left"> <label class="bold">Fecha de pago</label> <p>{{(credit._payment[0].createdAt).toUpperCase() | moment: 'format': 'MMMM DD YYYY, h:mm:ss a'}}</p> </div> <div class="form-group col-lg-6 text-left"> <label class="bold">Tipo de pago</label> <p>{{(credit._payment[0].data.tipo_pago || 'Finalizado').toUpperCase()}}</p> </div> <div class="form-group col-lg-6 text-left"> <label class="bold">EVIDENCIA DE PAGO</label> <p><a href="{{credit._payment[0].data.transaction}}" target="_blank">ADJUNTO</a></p> </div> </div> </div> <div class="tab-pane text-left" role="tabpanel" ng-show="tab == 'CO'" ng-class="{'active' : tab === 'CO'}"> <div class="row"> <div class="container"> <div class="chat"> <header> <h2 class="title"> <a href="https://www.elegantthemes.com/">Anotaciones Daimont</a> </h2> <ul class="tools"> <li> <a class="fa fa-gear" href="#"></a> </li> <li> <a class="fa fa-search" href="#"></a> </li> </ul> </header> <div class="body"> <div class="search"> <input placeholder="Buscar..." type="text"> </div> <p ng-hide="comments.length > 0" class="text-muted text-center" style="padding: 20px">No hay comentarios</p> <ul ng-show="comments.length > 0"> <li ng-repeat="comment in comments"> <a class="thumbnail" href="#"> NR </a> <div class="content"> <h3>{{comment.user}}</h3> <span class="preview">{{comment.comment}}</span> <span class="meta"> {{comment.createAt | moment: 'fromNow'}} - {{ comment.createAt | moment: 'format': 'MMMM DD YYYY, h:mm:ss a'}} · <a href ng-click="editComment()">Editar</a> · <a href ng-click="deleteComment()">Eliminar</a> </span> </div> </li> </ul> </div> <footer> <input style="margin-top: 5px" type="text" class="form-control" ng-model="comment" placeholder="Escribe un comentario.." ng-keypress="addComment($event)"> </footer> </div> </div> </div> </div> <div ng-init="getPaymentsCredits()" class="tab-pane" id="home1" role="tabpanel" ng-show="tab == 'LPA'" ng-class="{'active' : tab == 'LPA'}"> <div class="row"> <div class="col-lg-12"> <div class="table-responsive"> <table class="table table-striped"> <thead> <tr> <th>Pagaré</th> <th>Movimiento</th> <th>T. pago</th> <th>Intereses</th> <th>Iva</th> <th>Comprobante</th> <th>Total</th> <th></th> </tr> </thead> <tbody> <td colspan="9" class="text-center" ng-show="!filteredPaymentsDetails || filteredPaymentsDetails.length == 0"><i class="fa fa-exclamation-circle" aria-hidden="true"></i>&nbsp;No existen registros</td> <tr dir-paginate="paymentRecord in filteredPaymentsDetails = (payments_recordsDetails | orderBy:'-createdAt' | filter:searchPayment  | filter:{_user :  { data : { updated : true }} })                
                                                        | itemsPerPage: 5" pagination-id="payments_user_entity"> <th scope="row"><a href="#" ui-sref="detail({credit :  paymentRecord._credit._id})">{{paymentRecord._credit.data.id}}</a></th> <td>{{(paymentRecord.data.payment_type).toUpperCase()}}</td> <td>{{(paymentRecord.data.tipo_pago || 'Finalizado').toUpperCase()}}</td> <td>{{paymentRecord._credit.data.amount[0] | currency:"$ ":0}}</td> <td>{{paymentRecord.data.interestsDays | currency:"$ ":0}}</td> <td>{{paymentRecord.data.iva | currency:"$ ":0}}</td> <td><a href="{{paymentRecord.data.transaction}}" target="_blank">Imagen</a></td> <td>{{paymentRecord.data.total_payment || paymentForm.total_payment || record.data.total_payment | currency:"$ ":0}}</td> <td><button ng-disabled="paymentRecord.data.status == 'Pendiente'" class="btn btn-block btn-primary btn-sm" ng-click="contract()">Contrato</button></td> </tr> </tbody> </table> <div class="pull-left"> <dir-pagination-controls class="pull-right" pagination-id="payments_user_entity"></dir-pagination-controls> </div> </div> </div> </div> </div> </div> </div> </div> <!-- End Tabs on plain Card --> </div> </div> </div> </div> <br> <br> <br> <br> <br> <br> <br> <br> </div> <daimont-footer></daimont-footer></div>